{% extends "base.html" %} 
{% block title %}Hashtag Info{% endblock %}

{% block content %}


<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" />
<link href="..\static\css\fullScreenHashTag.css" rel="stylesheet" type="text/css">
<link href="..\static\css\slideChart.css" rel="stylesheet" type="text/css">

<!-- Like Btn -->
<link href="..\static\css\likeBtn\style.css" rel="stylesheet" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

<!-- For Chart Design -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


<div id="slider" class="carousel slide" data-ride="carousel" data-interval="false">

  <!-- The slideshow -->
  <div class="carousel-inner">
    <div class="carousel-item active">
    <div class="statContainer">
    <h1><i class="fa fa-twitter banner-twitter" aria-hidden="true"></i></h1>
        <div class="row">
        {% if support ==  True %}
            <span class="banner">{{ '%0.2f'| format((opinon["support"]/(opinon["support"]+opinon["unsuppoprt"]))*100|float) }}% people have a same view with you</span>
            <span class="banner-info">We have collected {{tweets_num}} tweets from twitter...</span>
        {% elif support == False %}
            <span class="banner">{{ '%0.2f'| format((opinon["unsuppoprt"]/(opinon["support"]+opinon["unsuppoprt"]))*100|float) }}% people have a same view with you</span>
            <span class="banner-info">We have collected {{tweets_num}} tweets from twitter...</span>
        {% endif %}
        </div>
        <form method='post' action={{ url_for('reports.detailHashTag', res=hashtagDoc, InputNow=InputNow) }}>
          <button type="submit" class="btn btn-primary moreInfo">More Info</button>
        </form>
    </div>

</div>


    <div class="carousel-item padding-narrow">
        <div class="mt-5 pt-30 pt-60 pb-5 fullSide">
        <h2 class="text-center text-white headerInfo">Opinions From Tweets</h2>
        <div>
          <canvas id="supportChart" width="180" height="80"></canvas>
        </div>
        </div>
    </div>

    <div class="carousel-item padding-narrow">
        <div class="mt-5 pt-30 pt-60 pb-5 fullSide">
        <h2 class="text-center text-white headerInfo">Sentiment From Tweets</h2>
        <div>
          <canvas id="sentChart" width="180" height="80"></canvas>   
        </div>
        </div>
    </div>

      <div class="carousel-item padding-narrow">
        <div class="mt-5 pt-30 pt-60 pb-5 fullSide">
        <h2 class="text-center text-white headerInfo">Supportive Trend From Tweets</h2>
        <div>
          <canvas id="DistributeChart" width="250" height="100"></canvas>     
        </div>
        </div>
    </div>


  </div>

  <!-- Left and right controls -->
  <a class="carousel-control-prev" href="#slider" data-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </a>
  <a class="carousel-control-next" href="#slider" data-slide="next">
    <span class="carousel-control-next-icon"></span>
  </a>


    <script src="../static/hashtagInfo.js"></script>
</div>

<!-- If in dashboard, show the like btn -->
{% if not  InputNow %}
<!-- Like Buttons -->
<a href="#" class="float">
  <i class="fa fa-plus icon"></i>
</a>
<ul>
  <li>
    <a href="/discoverMore">
      <div class="centreIcon" class="btnLoading">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          fill="currentColor"
          class="bi bi-collection-fill icon"
          viewBox="0 0 16 16"
        >
          <path
            d="M0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z"
          />
        </svg>
      </div>
    </a>
  </li>
  <li>
    <a href="/sentiment" class="emotionBtn">
      <div class="centreIcon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          fill="currentColor"
          class="bi bi-emoji-laughing-fill icon"
          viewBox="0 0 16 16"
        >
          <path
            d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5c0 .501-.164.396-.415.235C6.42 6.629 6.218 6.5 6 6.5c-.218 0-.42.13-.585.235C5.164 6.896 5 7 5 6.5 5 5.672 5.448 5 6 5s1 .672 1 1.5zm5.331 3a1 1 0 0 1 0 1A4.998 4.998 0 0 1 8 13a4.998 4.998 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5zm-1.746-2.765C10.42 6.629 10.218 6.5 10 6.5c-.218 0-.42.13-.585.235C9.164 6.896 9 7 9 6.5c0-.828.448-1.5 1-1.5s1 .672 1 1.5c0 .501-.164.396-.415.235z"
          />
        </svg>
      </div>
    </a>
  </li>
  <li>
    <a href="/textAnalysis" class="analysisBtn">
      <div class="centreIcon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          fill="currentColor"
          class="bi bi-pencil-fill icon"
          viewBox="0 0 16 16"
        >
          <path
            d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"
          />
        </svg>
      </div>
    </a>
  </li>
  <li>
    <a href="/summary" class="btn-get-started scrollto sumBtn">
      <div class="centreIcon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          fill="currentColor"
          class="bi bi-book-half icon"
          viewBox="0 0 16 16"
        >
          <path
            d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"
          />
        </svg>
      </div>
    </a>
  </li>
  <li>
    <a href="#">
      <i class="fa fa-thumbs-up icon"></i>
    </a>
  </li>
  <li>
    <a href="/wordNetwork" class="dashboardBtn">
      <i class="fa fa-backward icon"></i>
    </a>
  </li>
</ul>
<!-- End - Buttons -->
{% endif %}


<script>
  Chart.defaults.global.defaultFontColor = "#87ceeb";
  
  var ctxSupport = document.getElementById('supportChart').getContext('2d');
  const dataSupport = {
    labels: [
      'Support',
      'Not Support',
      'No Opinions'
    ],
    datasets: [{
      label: 'Opinions from Tweets',
      data: [
        {{opinon["support"]}},
        {{opinon["unsuppoprt"]}},
        {{opinon["no_opinons"]}},
      ],
    backgroundColor: [
      'rgba(255, 99, 132, 0.8)',
      'rgba(54, 162, 235, 0.8)',
      'rgba(75, 192, 192, 0.8)',
    ],
    hoverOffset: 2
    }]
  };

  const configSupport = {
    type: 'bar',
    data: dataSupport,
    options: {
    scales: {
        yAxes: [{
            ticks: {
                beginAtZero: true
            }
        }]
    },
}
  };

  var myChartSupport = new Chart(ctxSupport, configSupport);


  var ctxSent = document.getElementById('sentChart').getContext('2d');
  const dataSent = {
    labels: [
      'Postive',
      'Negative',
      'Netural'
    ],
    datasets: [{
      label: 'Sentiment from Tweets',
      data: [
        {{opinon["positive"]}},
        {{opinon["negative"]}},
        {{opinon["neutral"]}},
      ],
    backgroundColor: [
      'rgba(55,55,200, 0.8)',
      'rgba(200,55,55, 0.8)',
      'rgba(55,200,55, 0.8)',
    ],
    hoverOffset: 2
    }]
  };

  const configSent = {
    type: 'horizontalBar',
    data: dataSent,
  };

  var myChartSent = new Chart(ctxSent, configSent);


  var ctxDistribute = document.getElementById('DistributeChart').getContext('2d');
    const dataDistribute = {
        labels: [
            {% for time in timeline %}
                "{{time["Release"]}}",
            {% endfor %}
        ],
        datasets: [{
            label: 'Supportive Trend',
            data: [
            {% for time in timeline %}
                {{time["Polarity"]}},
            {% endfor %}
            ],
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1,
            hoverOffset: 1
        }]
    };

    const configDistribute = {
        type: 'line',
        data: dataDistribute,
    };

    var myChartSentiment = new Chart(ctxDistribute, configDistribute);


    
</script> 


{% endblock %}